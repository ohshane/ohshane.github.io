---
title: Geometric Seuqnece
subtitle: Adding up terms in a sequence with a pattern
author: Shane Oh
date: 2023-04-14
image: false
categories:
  - Math
---

```{=html}
<style>
.dot figure svg {
  width: 100% !important;
  max-width: 400px !important;
  max-height: 300px !important;
  background: red;
}
</style>
```
When adding up terms in a sequence with a specific pattern,
such as a geometric sequence, using a formula or recognizing a pattern can make the process much easier.

Let's see how it works.

$$
a, ar, ar^2, ar^3, \cdots, ar^n
$$

The sequence above is an arbitrary geometric sequence,
where each character denotes the following:

- $a$: the first term
- $r$: the common ratio

The sum from the first term to the n-th term can be calculated using the following formula.

$$
\begin{align*}
S_n &= a + ar + ar^2 + \cdots + ar^{n-1} \\
rS_n &= ar + ar^2 + ar^3 \cdots + ar^n \\
rS_n - S_n &= ar^n - a \\
S_n &= \dfrac{a(r^n - 1)}{r-1}
\end{align*}
$$

Let's take an example.

$$
1 + 2 + 4 + \cdots + 2^n = 2^{n+1} - 1
$$

This can be easily seen when counting nodes in a complete binary tree
or calculating the moving average of a gradient using the momentum.

::: {.dot}
```{dot}
//| fig-cap: A complete binary tree 
graph binaryTree {
  rankdir=TB
  1 -- 2
  1 -- 3
  2 -- 4
}
```
:::
<!-- 
digraph dfa {
  rankdir=LR

  "" [shape=none, width=0, height=0]
  A [shape=circle]
  B [shape=circle]
  C [shape=circle]
  D [shape=doublecircle]

  "" -> A
  A -> C [label=" 1 "]
  C -> A [label=" 1 "]

  A -> B [label=" 0 "]
  B -> A [label=" 0 "]

  B -> D [label=" 1 "]
  D -> B [label=" 1 "]

  C -> D [label=" 0 "]
  D -> C [label=" 0 "]
} -->